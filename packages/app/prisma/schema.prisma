generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model AdminOrder {
  id            String   @id
  user          String
  userAddress   String?
  companionAddress String?
  item          String
  amount        Float
  currency      String
  paymentStatus String
  stage         String
  note          String?
  assignedTo    String?
  source        String?
  chainDigest   String?
  chainStatus   Int?
  serviceFee    Float?
  deposit       Float?
  meta          Json?
  createdAt     DateTime
  updatedAt     DateTime?

  @@index([createdAt])
  @@index([stage])
  @@index([paymentStatus])
  @@index([userAddress])
  @@index([chainStatus])
}

model AdminPlayer {
  id        String   @id
  name      String
  role      String?
  contact   String?
  status    String
  notes     String?
  createdAt DateTime
  updatedAt DateTime?

  @@index([createdAt])
  @@index([status])
}

model AdminAnnouncement {
  id        String   @id
  title     String
  tag       String
  content   String
  status    String
  createdAt DateTime
  updatedAt DateTime?

  @@index([createdAt])
  @@index([status])
}

model AdminSession {
  id         String   @id
  tokenHash  String   @unique
  role       String
  label      String?
  createdAt  DateTime
  expiresAt  DateTime
  lastSeenAt DateTime?
  ip         String?
  userAgent  String?

  @@index([expiresAt])
}

model AdminAuditLog {
  id             String   @id
  actorRole      String
  actorSessionId String?
  action         String
  targetType     String?
  targetId       String?
  meta           Json?
  ip             String?
  createdAt      DateTime

  @@index([createdAt])
  @@index([action])
}

model AdminPaymentEvent {
  id        String   @id
  provider  String
  event     String
  orderNo   String?
  amount    Float?
  status    String?
  verified  Boolean
  createdAt DateTime
  raw       Json?

  @@index([createdAt])
  @@index([orderNo])
}

model AdminSupportTicket {
  id          String   @id
  userName    String?
  userAddress String?
  contact     String?
  topic       String?
  message     String
  status      String
  note        String?
  meta        Json?
  createdAt   DateTime
  updatedAt   DateTime?

  @@index([createdAt])
  @@index([status])
}

model AdminCoupon {
  id          String   @id
  title       String
  code        String?
  description String?
  discount    Float?
  minSpend    Float?
  status      String
  startsAt    DateTime?
  expiresAt   DateTime?
  createdAt   DateTime
  updatedAt   DateTime?

  @@index([status])
  @@index([expiresAt])
}

model AdminInvoiceRequest {
  id          String   @id
  user        String?
  userAddress String?
  contact     String?
  email       String?
  orderId     String?
  amount      Float?
  title       String?
  taxId       String?
  address     String?
  status      String
  note        String?
  meta        Json?
  createdAt   DateTime
  updatedAt   DateTime?

  @@index([createdAt])
  @@index([status])
  @@index([orderId])
}

model AdminGuardianApplication {
  id          String   @id
  user        String?
  userAddress String?
  contact     String?
  games       String?
  experience  String?
  availability String?
  status      String
  note        String?
  meta        Json?
  createdAt   DateTime
  updatedAt   DateTime?

  @@index([createdAt])
  @@index([status])
}
